#pragma checksum "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "086c19b671206d9a5a1ab876b31a54feccba6580"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Preview_Index), @"mvc.1.0.view", @"/Views/Preview/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\_ViewImports.cshtml"
using OrchardCore.Templates;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\_ViewImports.cshtml"
using OrchardCore.Templates.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\_ViewImports.cshtml"
using OrchardCore.Templates.ViewModels;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"086c19b671206d9a5a1ab876b31a54feccba6580", @"/Views/Preview/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"20ebe696adc03e0619854aae23371c537ce90875", @"/Views/_ViewImports.cshtml")]
    public class Views_Preview_Index : OrchardCore.DisplayManagement.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-name", "bootstrap", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-src", "~/OrchardCore.Templates/js.cookie.js", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("depends-on", "jquery", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::OrchardCore.ResourceManagement.TagHelpers.StyleTagHelper __OrchardCore_ResourceManagement_TagHelpers_StyleTagHelper;
        private global::OrchardCore.ResourceManagement.TagHelpers.ScriptTagHelper __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper;
        private global::OrchardCore.ResourceManagement.TagHelpers.ResourcesTagHelper __OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
  
    Layout = null;
    Title.AddSegment(T["Template Preview"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("style", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "086c19b671206d9a5a1ab876b31a54feccba65804882", async() => {
            }
            );
            __OrchardCore_ResourceManagement_TagHelpers_StyleTagHelper = CreateTagHelper<global::OrchardCore.ResourceManagement.TagHelpers.StyleTagHelper>();
            __tagHelperExecutionContext.Add(__OrchardCore_ResourceManagement_TagHelpers_StyleTagHelper);
            __OrchardCore_ResourceManagement_TagHelpers_StyleTagHelper.Name = (string)__tagHelperAttribute_0.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "086c19b671206d9a5a1ab876b31a54feccba65806018", async() => {
            }
            );
            __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper = CreateTagHelper<global::OrchardCore.ResourceManagement.TagHelpers.ScriptTagHelper>();
            __tagHelperExecutionContext.Add(__OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper);
            __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper.Name = (string)__tagHelperAttribute_0.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_0);
#nullable restore
#line 7 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
__OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper.At = global::OrchardCore.ResourceManagement.ResourceLocation.Foot;

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("at", __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper.At, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "086c19b671206d9a5a1ab876b31a54feccba65807690", async() => {
            }
            );
            __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper = CreateTagHelper<global::OrchardCore.ResourceManagement.TagHelpers.ScriptTagHelper>();
            __tagHelperExecutionContext.Add(__OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper);
            __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper.Src = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper.DependsOn = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
#nullable restore
#line 8 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
__OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper.At = global::OrchardCore.ResourceManagement.ResourceLocation.Foot;

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("at", __OrchardCore_ResourceManagement_TagHelpers_ScriptTagHelper.At, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("resources", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "086c19b671206d9a5a1ab876b31a54feccba65809576", async() => {
            }
            );
            __OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper = CreateTagHelper<global::OrchardCore.ResourceManagement.TagHelpers.ResourcesTagHelper>();
            __tagHelperExecutionContext.Add(__OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper);
#nullable restore
#line 10 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
__OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper.Type = global::OrchardCore.ResourceManagement.TagHelpers.ResourceType.Header;

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("type", __OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper.Type, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"

<iframe id=""iframe"" style=""display:none; position:fixed; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden;z-index:999990;"">
    Your browser doesn't support iframes
</iframe>

<iframe id=""iframe2"" style=""display:none; position:fixed; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden;z-index:999990;"">
    Your browser doesn't support iframes
</iframe>

<div id=""notConnectedWarning"" class=""alert alert-info alert-dismissible fade show collapse"" role=""alert"" style=""position:fixed; height:60px; top:10px;right:40px; display:none; z-index:999999;"">
    <button type=""button"" id=""close-warning"" class=""close"" aria-label=""Close"" style=""position: relative; padding: 0 0 0 1rem; margin-top: -0.2rem;"">
        <span aria-hidden=""true"">&times;</span>
    </button>
    <span>");
#nullable restore
#line 24 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
     Write(T["Preview Disconnected"]);

#line default
#line hidden
#nullable disable
            WriteLiteral(@" </span>
</div>

<div id=""serverErrorWarning"" class=""alert alert-warning alert-dismissible fade show"" role=""alert"" style=""position:fixed; top:10px;right:40px; display:none; z-index:999999;"">
    <button type=""button"" id=""close-server-warning"" class=""close"" aria-label=""Close"" style=""position: relative; padding: 0 0 0 1rem; margin-top: -0.2rem;"">
        <span aria-hidden=""true"">&times;</span>
    </button>
    <p>");
#nullable restore
#line 31 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
  Write(T["Preview Error"]);

#line default
#line hidden
#nullable disable
            WriteLiteral(" </p>\r\n    <ul></ul>\r\n</div>\r\n\r\n<div id=\"indexPreviewUrl\" style=\"display:none\" data-value=\"");
#nullable restore
#line 35 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
                                                      Write(Url.Action("Index", "Preview" , new { area="OrchardCore.Templates" }));

#line default
#line hidden
#nullable disable
            WriteLiteral("\"></div>\r\n<div id=\"renderPreviewUrl\" style=\"display:none\" data-value=\"");
#nullable restore
#line 36 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
                                                       Write(Url.Action("Render", "Preview" , new { area="OrchardCore.Templates" }));

#line default
#line hidden
#nullable disable
            WriteLiteral("\"></div>\r\n<div id=\"contentPreviewUrl\" style=\"display:none\" data-value=\"");
#nullable restore
#line 37 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
                                                        Write(Url.Content("~/"));

#line default
#line hidden
#nullable disable
            WriteLiteral("\"></div>\r\n\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("resources", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "086c19b671206d9a5a1ab876b31a54feccba658014243", async() => {
            }
            );
            __OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper = CreateTagHelper<global::OrchardCore.ResourceManagement.TagHelpers.ResourcesTagHelper>();
            __tagHelperExecutionContext.Add(__OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper);
#nullable restore
#line 39 "C:\projects\orchard\OrchardCore\src\OrchardCore.Modules\OrchardCore.Templates\Views\Preview\Index.cshtml"
__OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper.Type = global::OrchardCore.ResourceManagement.TagHelpers.ResourceType.Footer;

#line default
#line hidden
#nullable disable
            __tagHelperExecutionContext.AddTagHelperAttribute("type", __OrchardCore_ResourceManagement_TagHelpers_ResourcesTagHelper.Type, global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"

<script type=""text/javascript"">
    var indexPreviewUrl = $(document.getElementById('indexPreviewUrl')).data('value');
    var renderPreviewUrl = $(document.getElementById('renderPreviewUrl')).data('value');
    var contentPreviewUrl = $(document.getElementById('contentPreviewUrl')).data('value');
    var iframe = document.getElementById('iframe');
    var iframe2 = document.getElementById('iframe2');
    var previewEventTimer = null;
    var previewRenderTimer = null;

    $(function () {
        $(window).on('storage', function (ev) {
            if (ev.key == 'OrchardCore.templates:not-connected') {
                $(notConnectedWarning).show();
            }
            else if (ev.key == 'OrchardCore.templates') {
                if (ev.originalEvent.newValue != null) {
                    // Smooth event cascading
                    clearTimeout(previewEventTimer);
                    previewEventTimer = setTimeout(function () { renderPreview(ev.originalEvent.newValue); }, 150);
");
            WriteLiteral(@"                    $(notConnectedWarning).hide();
                }
            }
        });

        // override default behaviour of Bootstrap's. We only hide, not remove the alert.
        $('#close-warning').on('click', function () {
            $('#notConnectedWarning').hide();
        });

        $('#close-server-warning').on('click', function () {
            $('#serverErrorWarning').hide();
        });

        var preview = localStorage.getItem('OrchardCore.templates');

        if (preview == null) {
            // notify the editor to render the preview
            localStorage.setItem('OrchardCore.templates:ready', '');
            localStorage.removeItem('OrchardCore.templates:ready');
        }
        else {
            renderPreview(preview);
        }
    });

    iframe.onload = function () {
        if (previewRendering) {
            this.style.display = 'block';
            $(this.contentWindow).scrollTop(scrollTop);

            if (iframe2 && iframe2.co");
            WriteLiteral(@"ntentWindow) {
                iframe2.style.display = 'none';
                iframe2.contentWindow.document.open();
                iframe2.contentWindow.document.write(previewRenderData);
                iframe2.contentWindow.document.close();
            }
            previewRendering = false;
        }

        if (this.contentWindow && this.contentWindow.location.pathname != indexPreviewUrl) {
            contentPreviewUrl = this.contentWindow.location.pathname;
            if (iframe2 && iframe2.contentWindow) {
                iframe2.contentWindow.location = this.contentWindow.location;
            }
        }
    }

    var previewRendering;
    var previewRenderData;
    var scrollTop = 0;

    function renderPreview(value) {

        if (previewRendering) {
            // Defer the last rendering
            clearTimeout(previewRenderTimer);
            previewRenderTimer = setTimeout(function () { renderPreview(value); }, 100);
        }

        previewRendering = tr");
            WriteLiteral(@"ue;
        clearTimeout(previewRenderTimer);

        try {

            var formData = JSON.parse(value);
            if (!formData) {
                previewRendering = false;
                return;
            }
            formData += '&' + $.param({ 'Alias': contentPreviewUrl || """" });

            $.post(renderPreviewUrl, formData)
                .done(function (data) {
                    if (iframe && iframe.contentWindow && iframe2 && iframe2.contentWindow) {

                        // A full writing of the frame document causes the iframe to be re-loaded.
                        // So, better to update the scroll position on the related 'onload' event.
                        // Then, we use 2 frames to cancel the flicker that this deferring causes.

                        scrollTop = $(iframe.contentWindow).scrollTop();
                        iframe2.style.display = 'block';
                        $(iframe2.contentWindow).scrollTop(scrollTop);

                       ");
            WriteLiteral(@" iframe.style.display = 'none';
                        iframe.contentWindow.document.open();
                        iframe.contentWindow.document.write(data);
                        iframe.contentWindow.document.close();
                        previewRenderData = data;
                    }
                    $(serverErrorWarning).hide();
                })
                .fail(function (data) {
                    if (data.status) {
                        var ul = $('#serverErrorWarning ul').empty();
                        var error = 'Status code ' + data.status;
                        console.error(error);
                        $('<li/>').text(error).appendTo(ul);
                        $(serverErrorWarning).show();
                    }
                    previewRendering = false;
                });
        }
        catch (e) {
            previewRendering = false;
            console.log('Error while previewing: ' + e);
        }
    }

</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
